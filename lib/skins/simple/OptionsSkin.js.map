{"version":3,"sources":["../../../source/skins/simple/OptionsSkin.js"],"names":["OptionsSkin","props","getOptionProps","getHighlightedOptionIndex","handleClickOnOption","isHighlightedOption","isOpen","isOpeningUpward","isSelectedOption","noResults","noResultsMessage","optionsMaxHeight","optionRenderer","options","optionsRef","render","setHighlightedOptionIndex","targetRef","theme","themeId","toggleMouseLocation","highlightedOptionIndex","isFirstOptionHighlighted","sortedOptions","slice","reverse","renderOptions","map","option","index","boundSetHighlightedOptionIndex","bind","boundHandleClickOnOption","highlightedOption","selectedOption","isDisabled","disabledOption","renderOption","label","optionsStyle","maxHeight","openUpward","firstOptionHighlighted","BubbleSkin","ul"],"mappings":"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","file":"OptionsSkin.js","sourcesContent":["// @flow\nimport React from 'react';\nimport type { Element, ElementRef } from 'react';\n\n// external libraries\nimport classnames from 'classnames';\nimport { isFunction, isObject } from 'lodash';\n\n// components\nimport { Bubble } from '../../components/Bubble';\n\n// skins\nimport { BubbleSkin } from './BubbleSkin';\n\ntype Props = {\n  getOptionProps: Function,\n  getHighlightedOptionIndex: Function,\n  handleClickOnOption: Function,\n  isHighlightedOption: Function,\n  isOpen: boolean,\n  isOpeningUpward: boolean,\n  isSelectedOption: Function,\n  noResults: boolean,\n  noResultsMessage: string | Element<any>,\n  optionRenderer: Function,\n  options: Array<any>,\n  optionsRef: ElementRef<*>,\n  optionsMaxHeight: number,\n  render: Function,\n  selectedOption: any,\n  setHighlightedOptionIndex: Function,\n  targetRef: ElementRef<*>,\n  theme: Object,\n  themeId: string,\n  toggleMouseLocation: Function,\n};\n\nexport const OptionsSkin = (props: Props) => {\n  const {\n    getOptionProps,\n    getHighlightedOptionIndex,\n    handleClickOnOption,\n    isHighlightedOption,\n    isOpen,\n    isOpeningUpward,\n    isSelectedOption,\n    noResults,\n    noResultsMessage,\n    optionsMaxHeight,\n    optionRenderer,\n    options,\n    optionsRef,\n    render,\n    setHighlightedOptionIndex,\n    targetRef,\n    theme,\n    themeId,\n    toggleMouseLocation,\n  } = props;\n\n  const highlightedOptionIndex = getHighlightedOptionIndex();\n  const isFirstOptionHighlighted = highlightedOptionIndex === 0;\n  const sortedOptions = isOpeningUpward ? options.slice().reverse() : options;\n\n  const renderOptions = () => {\n    // check for user's custom render function\n    // if Options is being rendered via Autocomplete,\n    // the value of props.render is renderOptions passed down from AutocompleteSkin\n    if (!noResults && render) {\n      // call user's custom render function\n      return render(getOptionProps);\n    } else if (!noResults && !render) {\n      // render default simple skin\n      return sortedOptions.map((option, index) => {\n        // set reference of event handlers in memory to prevent excess re-renders\n        const boundSetHighlightedOptionIndex = setHighlightedOptionIndex.bind(null, index);\n        const boundHandleClickOnOption = handleClickOnOption.bind(null, option);\n\n        return (\n          <li\n            role=\"presentation\"\n            aria-hidden\n            key={index}\n            className={classnames([\n              theme[themeId].option,\n              isHighlightedOption(index) ? theme[themeId].highlightedOption : null,\n              isSelectedOption(index) ? theme[themeId].selectedOption : null,\n              option.isDisabled ? theme[themeId].disabledOption : null\n            ])}\n            onClick={boundHandleClickOnOption}\n            onMouseEnter={boundSetHighlightedOptionIndex}\n          >\n            {renderOption(option)}\n          </li>\n        );\n      });\n    }\n    // render no results message\n    return <li className={theme[themeId].option}>{noResultsMessage}</li>;\n  };\n\n  const renderOption = option => {\n    // check if user has passed render prop \"optionRenderer\"\n    if (optionRenderer && isFunction(optionRenderer)) {\n      // call user's custom rendering logic\n      return optionRenderer(option);\n    } else if (isObject(option)) {\n      return <span className={theme[themeId].label}>{option.label}</span>;\n    }\n    return option;\n  };\n\n  // Enforce max height of options dropdown if necessary\n  const optionsStyle = optionsMaxHeight == null ? null : {\n    maxHeight: `${optionsMaxHeight}px`\n  };\n\n  return (\n    <Bubble\n      className={classnames([\n        theme[themeId].options,\n        isOpen ? theme[themeId].isOpen : null,\n        isOpeningUpward ? theme[themeId].openUpward : null,\n        isFirstOptionHighlighted && !noResults\n          ? theme[themeId].firstOptionHighlighted\n          : null\n      ])}\n      isTransparent={false}\n      skin={BubbleSkin}\n      isOpeningUpward={isOpeningUpward}\n      isHidden={!isOpen}\n      isFloating\n      targetRef={targetRef}\n    >\n      <ul\n        style={optionsStyle}\n        ref={optionsRef}\n        className={theme[themeId].ul}\n        onMouseEnter={toggleMouseLocation}\n        onMouseLeave={toggleMouseLocation}\n      >\n        {renderOptions()}\n      </ul>\n    </Bubble>\n  );\n};\n"]}